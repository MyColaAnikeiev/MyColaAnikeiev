/*! For license information please see card_game.js.LICENSE.txt */
(()=>{"use strict";var n={652:(n,t,e)=>{e.r(t),e.d(t,{ArgumentOutOfRangeError:()=>lt,AsyncSubject:()=>rn,BehaviorSubject:()=>nn,ConnectableObservable:()=>G,EMPTY:()=>kn,EmptyError:()=>ut,NEVER:()=>Jt,NotFoundError:()=>st,Notification:()=>rt,NotificationKind:()=>Un,ObjectUnsubscribedError:()=>J,Observable:()=>B,ReplaySubject:()=>en,Scheduler:()=>vn,SequenceError:()=>ft,Subject:()=>Q,Subscriber:()=>C,Subscription:()=>v,TimeoutError:()=>ht,UnsubscriptionError:()=>h,VirtualAction:()=>Cn,VirtualTimeScheduler:()=>In,animationFrame:()=>Tn,animationFrameScheduler:()=>An,animationFrames:()=>Y,asap:()=>mn,asapScheduler:()=>yn,async:()=>gn,asyncScheduler:()=>wn,audit:()=>de,auditTime:()=>he,bindCallback:()=>gt,bindNodeCallback:()=>xt,buffer:()=>pe,bufferCount:()=>ve,bufferTime:()=>be,bufferToggle:()=>ye,bufferWhen:()=>me,catchError:()=>we,combineAll:()=>Te,combineLatest:()=>Ct,combineLatestAll:()=>Ae,combineLatestWith:()=>Ce,concat:()=>jt,concatAll:()=>Nt,concatMap:()=>ke,concatMapTo:()=>Oe,concatWith:()=>Pe,config:()=>w,connect:()=>Ne,connectable:()=>Bt,count:()=>je,debounce:()=>De,debounceTime:()=>Me,defaultIfEmpty:()=>Be,defer:()=>Dt,delay:()=>qe,delayWhen:()=>We,dematerialize:()=>Ge,distinct:()=>ze,distinctUntilChanged:()=>Ze,distinctUntilKeyChanged:()=>Ve,elementAt:()=>Je,empty:()=>On,endWith:()=>Qe,every:()=>$e,exhaust:()=>tr,exhaustAll:()=>nr,exhaustMap:()=>er,expand:()=>rr,filter:()=>oe,finalize:()=>ir,find:()=>or,findIndex:()=>cr,first:()=>ar,firstValueFrom:()=>at,flatMap:()=>br,forkJoin:()=>Lt,from:()=>nt,fromEvent:()=>qt,fromEventPattern:()=>zt,generate:()=>Zt,groupBy:()=>lr,identity:()=>j,ignoreElements:()=>Fe,iif:()=>Yt,interval:()=>Xt,isEmpty:()=>fr,isObservable:()=>ot,last:()=>hr,lastValueFrom:()=>ct,map:()=>bt,mapTo:()=>Ue,materialize:()=>pr,max:()=>vr,merge:()=>Kt,mergeAll:()=>Ht,mergeMap:()=>Pt,mergeMapTo:()=>yr,mergeScan:()=>mr,mergeWith:()=>gr,min:()=>xr,multicast:()=>_r,never:()=>Qt,noop:()=>_,observable:()=>N,observeOn:()=>Xn,of:()=>tt,onErrorResumeNext:()=>ee,pairs:()=>re,pairwise:()=>Sr,partition:()=>ue,pipe:()=>D,pluck:()=>Er,publish:()=>Ar,publishBehavior:()=>Tr,publishLast:()=>Ir,publishReplay:()=>Cr,queue:()=>Sn,queueScheduler:()=>_n,race:()=>ce,raceWith:()=>kr,range:()=>le,reduce:()=>xe,refCount:()=>q,repeat:()=>Or,repeatWhen:()=>Rr,retry:()=>Pr,retryWhen:()=>Hr,sample:()=>Nr,sampleTime:()=>jr,scan:()=>Dr,scheduled:()=>$n,sequenceEqual:()=>Mr,share:()=>Br,shareReplay:()=>Fr,single:()=>Ur,skip:()=>Wr,skipLast:()=>qr,skipUntil:()=>Gr,skipWhile:()=>zr,startWith:()=>Zr,subscribeOn:()=>Kn,switchAll:()=>Vr,switchMap:()=>Yr,switchMapTo:()=>Xr,switchScan:()=>Kr,take:()=>Le,takeLast:()=>dr,takeUntil:()=>Jr,takeWhile:()=>Qr,tap:()=>$r,throttle:()=>ti,throttleTime:()=>ei,throwError:()=>et,throwIfEmpty:()=>Xe,timeInterval:()=>ri,timeout:()=>pt,timeoutWith:()=>oi,timer:()=>Vt,timestamp:()=>ui,toArray:()=>Se,using:()=>se,window:()=>ci,windowCount:()=>ai,windowTime:()=>li,windowToggle:()=>si,windowWhen:()=>fi,withLatestFrom:()=>di,zip:()=>fe,zipAll:()=>hi,zipWith:()=>vi});var r=function(n,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(n[e]=t[e])})(n,t)};function i(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}r(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}function o(n,t){var e,r,i,o,u={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(e)throw new TypeError("Generator is already executing.");for(;u;)try{if(e=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return u.label++,{value:o[1],done:!1};case 5:u.label++,r=o[1],o=[0];continue;case 7:o=u.ops.pop(),u.trys.pop();continue;default:if(!((i=(i=u.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){u=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){u.label=o[1];break}if(6===o[0]&&u.label<i[1]){u.label=i[1],i=o;break}if(i&&u.label<i[2]){u.label=i[2],u.ops.push(o);break}i[2]&&u.ops.pop(),u.trys.pop();continue}o=t.call(n,u)}catch(n){o=[6,n],r=0}finally{e=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}}function u(n){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(n,t){var e="function"==typeof Symbol&&n[Symbol.iterator];if(!e)return n;var r,i,o=e.call(n),u=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)u.push(r.value)}catch(n){i={error:n}}finally{try{r&&!r.done&&(e=o.return)&&e.call(o)}finally{if(i)throw i.error}}return u}function a(n,t){for(var e=0,r=t.length,i=n.length;e<r;e++,i++)n[i]=t[e];return n}function l(n){return this instanceof l?(this.v=n,this):new l(n)}function s(n,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=e.apply(n,t||[]),o=[];return r={},u("next"),u("throw"),u("return"),r[Symbol.asyncIterator]=function(){return this},r;function u(n){i[n]&&(r[n]=function(t){return new Promise((function(e,r){o.push([n,t,e,r])>1||c(n,t)}))})}function c(n,t){try{(e=i[n](t)).value instanceof l?Promise.resolve(e.value.v).then(a,s):f(o[0][2],e)}catch(n){f(o[0][3],n)}var e}function a(n){c("next",n)}function s(n){c("throw",n)}function f(n,t){n(t),o.shift(),o.length&&c(o[0][0],o[0][1])}}function f(n){return"function"==typeof n}function d(n){var t=n((function(n){Error.call(n),n.stack=(new Error).stack}));return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}Object.create,Object.create;var h=d((function(n){return function(t){n(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map((function(n,t){return t+1+") "+n.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t}}));function p(n,t){if(n){var e=n.indexOf(t);0<=e&&n.splice(e,1)}}var v=function(){function n(n){this.initialTeardown=n,this.closed=!1,this._parentage=null,this._teardowns=null}return n.prototype.unsubscribe=function(){var n,t,e,r,i;if(!this.closed){this.closed=!0;var o=this._parentage;if(o)if(this._parentage=null,Array.isArray(o))try{for(var l=u(o),s=l.next();!s.done;s=l.next())s.value.remove(this)}catch(t){n={error:t}}finally{try{s&&!s.done&&(t=l.return)&&t.call(l)}finally{if(n)throw n.error}}else o.remove(this);var d=this.initialTeardown;if(f(d))try{d()}catch(n){i=n instanceof h?n.errors:[n]}var p=this._teardowns;if(p){this._teardowns=null;try{for(var v=u(p),b=v.next();!b.done;b=v.next()){var y=b.value;try{m(y)}catch(n){i=null!=i?i:[],n instanceof h?i=a(a([],c(i)),c(n.errors)):i.push(n)}}}catch(n){e={error:n}}finally{try{b&&!b.done&&(r=v.return)&&r.call(v)}finally{if(e)throw e.error}}}if(i)throw new h(i)}},n.prototype.add=function(t){var e;if(t&&t!==this)if(this.closed)m(t);else{if(t instanceof n){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._teardowns=null!==(e=this._teardowns)&&void 0!==e?e:[]).push(t)}},n.prototype._hasParent=function(n){var t=this._parentage;return t===n||Array.isArray(t)&&t.includes(n)},n.prototype._addParent=function(n){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(n),t):t?[t,n]:n},n.prototype._removeParent=function(n){var t=this._parentage;t===n?this._parentage=null:Array.isArray(t)&&p(t,n)},n.prototype.remove=function(t){var e=this._teardowns;e&&p(e,t),t instanceof n&&t._removeParent(this)},n.EMPTY=function(){var t=new n;return t.closed=!0,t}(),n}(),b=v.EMPTY;function y(n){return n instanceof v||n&&"closed"in n&&f(n.remove)&&f(n.add)&&f(n.unsubscribe)}function m(n){f(n)?n():n.unsubscribe()}var w={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},g={setTimeout:function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];var e=g.delegate;return((null==e?void 0:e.setTimeout)||setTimeout).apply(void 0,a([],c(n)))},clearTimeout:function(n){var t=g.delegate;return((null==t?void 0:t.clearTimeout)||clearTimeout)(n)},delegate:void 0};function x(n){g.setTimeout((function(){var t=w.onUnhandledError;if(!t)throw n;t(n)}))}function _(){}var S=E("C",void 0,void 0);function E(n,t,e){return{kind:n,value:t,error:e}}var A=null;function T(n){if(w.useDeprecatedSynchronousErrorHandling){var t=!A;if(t&&(A={errorThrown:!1,error:null}),n(),t){var e=A,r=e.errorThrown,i=e.error;if(A=null,r)throw i}}else n()}function I(n){w.useDeprecatedSynchronousErrorHandling&&A&&(A.errorThrown=!0,A.error=n)}var C=function(n){function t(t){var e=n.call(this)||this;return e.isStopped=!1,t?(e.destination=t,y(t)&&t.add(e)):e.destination=H,e}return i(t,n),t.create=function(n,t,e){return new k(n,t,e)},t.prototype.next=function(n){this.isStopped?P(function(n){return E("N",n,void 0)}(n),this):this._next(n)},t.prototype.error=function(n){this.isStopped?P(E("E",void 0,n),this):(this.isStopped=!0,this._error(n))},t.prototype.complete=function(){this.isStopped?P(S,this):(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,n.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(n){this.destination.next(n)},t.prototype._error=function(n){try{this.destination.error(n)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(v),k=function(n){function t(t,e,r){var i,o=n.call(this)||this;if(f(t))i=t;else if(t){var u;i=t.next,e=t.error,r=t.complete,o&&w.useDeprecatedNextContext?(u=Object.create(t)).unsubscribe=function(){return o.unsubscribe()}:u=t,i=null==i?void 0:i.bind(u),e=null==e?void 0:e.bind(u),r=null==r?void 0:r.bind(u)}return o.destination={next:i?O(i):_,error:O(null!=e?e:R),complete:r?O(r):_},o}return i(t,n),t}(C);function O(n,t){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{n.apply(void 0,a([],c(t)))}catch(n){w.useDeprecatedSynchronousErrorHandling?I(n):x(n)}}}function R(n){throw n}function P(n,t){var e=w.onStoppedNotification;e&&g.setTimeout((function(){return e(n,t)}))}var H={closed:!0,next:_,error:R,complete:_},N="function"==typeof Symbol&&Symbol.observable||"@@observable";function j(n){return n}function D(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return M(n)}function M(n){return 0===n.length?j:1===n.length?n[0]:function(t){return n.reduce((function(n,t){return t(n)}),t)}}var B=function(){function n(n){n&&(this._subscribe=n)}return n.prototype.lift=function(t){var e=new n;return e.source=this,e.operator=t,e},n.prototype.subscribe=function(n,t,e){var r,i=this,o=(r=n)&&r instanceof C||function(n){return n&&f(n.next)&&f(n.error)&&f(n.complete)}(r)&&y(r)?n:new k(n,t,e);return T((function(){var n=i,t=n.operator,e=n.source;o.add(t?t.call(o,e):e?i._subscribe(o):i._trySubscribe(o))})),o},n.prototype._trySubscribe=function(n){try{return this._subscribe(n)}catch(t){n.error(t)}},n.prototype.forEach=function(n,t){var e=this;return new(t=L(t))((function(t,r){var i;i=e.subscribe((function(t){try{n(t)}catch(n){r(n),null==i||i.unsubscribe()}}),r,t)}))},n.prototype._subscribe=function(n){var t;return null===(t=this.source)||void 0===t?void 0:t.subscribe(n)},n.prototype[N]=function(){return this},n.prototype.pipe=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return M(n)(this)},n.prototype.toPromise=function(n){var t=this;return new(n=L(n))((function(n,e){var r;t.subscribe((function(n){return r=n}),(function(n){return e(n)}),(function(){return n(r)}))}))},n.create=function(t){return new n(t)},n}();function L(n){var t;return null!==(t=null!=n?n:w.Promise)&&void 0!==t?t:Promise}function F(n){return f(null==n?void 0:n.lift)}function U(n){return function(t){if(F(t))return t.lift((function(t){try{return n(t,this)}catch(n){this.error(n)}}));throw new TypeError("Unable to lift unknown Observable type")}}var W=function(n){function t(t,e,r,i,o){var u=n.call(this,t)||this;return u.onFinalize=o,u._next=e?function(n){try{e(n)}catch(n){t.error(n)}}:n.prototype._next,u._error=i?function(n){try{i(n)}catch(n){t.error(n)}finally{this.unsubscribe()}}:n.prototype._error,u._complete=r?function(){try{r()}catch(n){t.error(n)}finally{this.unsubscribe()}}:n.prototype._complete,u}return i(t,n),t.prototype.unsubscribe=function(){var t,e=this.closed;n.prototype.unsubscribe.call(this),!e&&(null===(t=this.onFinalize)||void 0===t||t.call(this))},t}(C);function q(){return U((function(n,t){var e=null;n._refCount++;var r=new W(t,void 0,void 0,void 0,(function(){if(!n||n._refCount<=0||0<--n._refCount)e=null;else{var r=n._connection,i=e;e=null,!r||i&&r!==i||r.unsubscribe(),t.unsubscribe()}}));n.subscribe(r),r.closed||(e=n.connect())}))}var G=function(n){function t(t,e){var r=n.call(this)||this;return r.source=t,r.subjectFactory=e,r._subject=null,r._refCount=0,r._connection=null,F(t)&&(r.lift=t.lift),r}return i(t,n),t.prototype._subscribe=function(n){return this.getSubject().subscribe(n)},t.prototype.getSubject=function(){var n=this._subject;return n&&!n.isStopped||(this._subject=this.subjectFactory()),this._subject},t.prototype._teardown=function(){this._refCount=0;var n=this._connection;this._subject=this._connection=null,null==n||n.unsubscribe()},t.prototype.connect=function(){var n=this,t=this._connection;if(!t){t=this._connection=new v;var e=this.getSubject();t.add(this.source.subscribe(new W(e,void 0,(function(){n._teardown(),e.complete()}),(function(t){n._teardown(),e.error(t)}),(function(){return n._teardown()})))),t.closed&&(this._connection=null,t=v.EMPTY)}return t},t.prototype.refCount=function(){return q()(this)},t}(B),z={now:function(){return(z.delegate||performance).now()},delegate:void 0},Z={schedule:function(n){var t=requestAnimationFrame,e=cancelAnimationFrame,r=Z.delegate;r&&(t=r.requestAnimationFrame,e=r.cancelAnimationFrame);var i=t((function(t){e=void 0,n(t)}));return new v((function(){return null==e?void 0:e(i)}))},requestAnimationFrame:function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];var e=Z.delegate;return((null==e?void 0:e.requestAnimationFrame)||requestAnimationFrame).apply(void 0,a([],c(n)))},cancelAnimationFrame:function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];var e=Z.delegate;return((null==e?void 0:e.cancelAnimationFrame)||cancelAnimationFrame).apply(void 0,a([],c(n)))},delegate:void 0};function Y(n){return n?V(n):K}function V(n){var t=Z.schedule;return new B((function(e){var r=new v,i=n||z,o=i.now(),u=function(c){var a=i.now();e.next({timestamp:n?a:c,elapsed:a-o}),e.closed||r.add(t(u))};return r.add(t(u)),r}))}var X,K=V(),J=d((function(n){return function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}})),Q=function(n){function t(){var t=n.call(this)||this;return t.closed=!1,t.observers=[],t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return i(t,n),t.prototype.lift=function(n){var t=new $(this,this);return t.operator=n,t},t.prototype._throwIfClosed=function(){if(this.closed)throw new J},t.prototype.next=function(n){var t=this;T((function(){var e,r;if(t._throwIfClosed(),!t.isStopped){var i=t.observers.slice();try{for(var o=u(i),c=o.next();!c.done;c=o.next())c.value.next(n)}catch(n){e={error:n}}finally{try{c&&!c.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}}}))},t.prototype.error=function(n){var t=this;T((function(){if(t._throwIfClosed(),!t.isStopped){t.hasError=t.isStopped=!0,t.thrownError=n;for(var e=t.observers;e.length;)e.shift().error(n)}}))},t.prototype.complete=function(){var n=this;T((function(){if(n._throwIfClosed(),!n.isStopped){n.isStopped=!0;for(var t=n.observers;t.length;)t.shift().complete()}}))},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(t){return this._throwIfClosed(),n.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)},t.prototype._innerSubscribe=function(n){var t=this,e=t.hasError,r=t.isStopped,i=t.observers;return e||r?b:(i.push(n),new v((function(){return p(i,n)})))},t.prototype._checkFinalizedStatuses=function(n){var t=this,e=t.hasError,r=t.thrownError,i=t.isStopped;e?n.error(r):i&&n.complete()},t.prototype.asObservable=function(){var n=new B;return n.source=this,n},t.create=function(n,t){return new $(n,t)},t}(B),$=function(n){function t(t,e){var r=n.call(this)||this;return r.destination=t,r.source=e,r}return i(t,n),t.prototype.next=function(n){var t,e;null===(e=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===e||e.call(t,n)},t.prototype.error=function(n){var t,e;null===(e=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===e||e.call(t,n)},t.prototype.complete=function(){var n,t;null===(t=null===(n=this.destination)||void 0===n?void 0:n.complete)||void 0===t||t.call(n)},t.prototype._subscribe=function(n){var t,e;return null!==(e=null===(t=this.source)||void 0===t?void 0:t.subscribe(n))&&void 0!==e?e:b},t}(Q),nn=function(n){function t(t){var e=n.call(this)||this;return e._value=t,e}return i(t,n),Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),t.prototype._subscribe=function(t){var e=n.prototype._subscribe.call(this,t);return!e.closed&&t.next(this._value),e},t.prototype.getValue=function(){var n=this,t=n.hasError,e=n.thrownError,r=n._value;if(t)throw e;return this._throwIfClosed(),r},t.prototype.next=function(t){n.prototype.next.call(this,this._value=t)},t}(Q),tn={now:function(){return(tn.delegate||Date).now()},delegate:void 0},en=function(n){function t(t,e,r){void 0===t&&(t=1/0),void 0===e&&(e=1/0),void 0===r&&(r=tn);var i=n.call(this)||this;return i._bufferSize=t,i._windowTime=e,i._timestampProvider=r,i._buffer=[],i._infiniteTimeWindow=!0,i._infiniteTimeWindow=e===1/0,i._bufferSize=Math.max(1,t),i._windowTime=Math.max(1,e),i}return i(t,n),t.prototype.next=function(t){var e=this,r=e.isStopped,i=e._buffer,o=e._infiniteTimeWindow,u=e._timestampProvider,c=e._windowTime;r||(i.push(t),!o&&i.push(u.now()+c)),this._trimBuffer(),n.prototype.next.call(this,t)},t.prototype._subscribe=function(n){this._throwIfClosed(),this._trimBuffer();for(var t=this._innerSubscribe(n),e=this._infiniteTimeWindow,r=this._buffer.slice(),i=0;i<r.length&&!n.closed;i+=e?1:2)n.next(r[i]);return this._checkFinalizedStatuses(n),t},t.prototype._trimBuffer=function(){var n=this,t=n._bufferSize,e=n._timestampProvider,r=n._buffer,i=n._infiniteTimeWindow,o=(i?1:2)*t;if(t<1/0&&o<r.length&&r.splice(0,r.length-o),!i){for(var u=e.now(),c=0,a=1;a<r.length&&r[a]<=u;a+=2)c=a;c&&r.splice(0,c+1)}},t}(Q),rn=function(n){function t(){var t=null!==n&&n.apply(this,arguments)||this;return t._value=null,t._hasValue=!1,t._isComplete=!1,t}return i(t,n),t.prototype._checkFinalizedStatuses=function(n){var t=this,e=t.hasError,r=t._hasValue,i=t._value,o=t.thrownError,u=t.isStopped,c=t._isComplete;e?n.error(o):(u||c)&&(r&&n.next(i),n.complete())},t.prototype.next=function(n){this.isStopped||(this._value=n,this._hasValue=!0)},t.prototype.complete=function(){var t=this,e=t._hasValue,r=t._value;t._isComplete||(this._isComplete=!0,e&&n.prototype.next.call(this,r),n.prototype.complete.call(this))},t}(Q),on=function(n){function t(t,e){return n.call(this)||this}return i(t,n),t.prototype.schedule=function(n,t){return void 0===t&&(t=0),this},t}(v),un={setInterval:function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];var e=un.delegate;return((null==e?void 0:e.setInterval)||setInterval).apply(void 0,a([],c(n)))},clearInterval:function(n){var t=un.delegate;return((null==t?void 0:t.clearInterval)||clearInterval)(n)},delegate:void 0},cn=function(n){function t(t,e){var r=n.call(this,t,e)||this;return r.scheduler=t,r.work=e,r.pending=!1,r}return i(t,n),t.prototype.schedule=function(n,t){if(void 0===t&&(t=0),this.closed)return this;this.state=n;var e=this.id,r=this.scheduler;return null!=e&&(this.id=this.recycleAsyncId(r,e,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(r,this.id,t),this},t.prototype.requestAsyncId=function(n,t,e){return void 0===e&&(e=0),un.setInterval(n.flush.bind(n,this),e)},t.prototype.recycleAsyncId=function(n,t,e){if(void 0===e&&(e=0),null!=e&&this.delay===e&&!1===this.pending)return t;un.clearInterval(t)},t.prototype.execute=function(n,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var e=this._execute(n,t);if(e)return e;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(n,t){var e,r=!1;try{this.work(n)}catch(n){r=!0,e=n||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),e},t.prototype.unsubscribe=function(){if(!this.closed){var t=this.id,e=this.scheduler,r=e.actions;this.work=this.state=this.scheduler=null,this.pending=!1,p(r,this),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null,n.prototype.unsubscribe.call(this)}},t}(on),an=1,ln={};function sn(n){return n in ln&&(delete ln[n],!0)}var fn=function(n){var t=an++;return ln[t]=!0,X||(X=Promise.resolve()),X.then((function(){return sn(t)&&n()})),t},dn=function(n){sn(n)},hn={setImmediate:function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];var e=hn.delegate;return((null==e?void 0:e.setImmediate)||fn).apply(void 0,a([],c(n)))},clearImmediate:function(n){var t=hn.delegate;return((null==t?void 0:t.clearImmediate)||dn)(n)},delegate:void 0},pn=function(n){function t(t,e){var r=n.call(this,t,e)||this;return r.scheduler=t,r.work=e,r}return i(t,n),t.prototype.requestAsyncId=function(t,e,r){return void 0===r&&(r=0),null!==r&&r>0?n.prototype.requestAsyncId.call(this,t,e,r):(t.actions.push(this),t._scheduled||(t._scheduled=hn.setImmediate(t.flush.bind(t,void 0))))},t.prototype.recycleAsyncId=function(t,e,r){if(void 0===r&&(r=0),null!=r&&r>0||null==r&&this.delay>0)return n.prototype.recycleAsyncId.call(this,t,e,r);0===t.actions.length&&(hn.clearImmediate(e),t._scheduled=void 0)},t}(cn),vn=function(){function n(t,e){void 0===e&&(e=n.now),this.schedulerActionCtor=t,this.now=e}return n.prototype.schedule=function(n,t,e){return void 0===t&&(t=0),new this.schedulerActionCtor(this,n).schedule(e,t)},n.now=tn.now,n}(),bn=function(n){function t(t,e){void 0===e&&(e=vn.now);var r=n.call(this,t,e)||this;return r.actions=[],r._active=!1,r._scheduled=void 0,r}return i(t,n),t.prototype.flush=function(n){var t=this.actions;if(this._active)t.push(n);else{var e;this._active=!0;do{if(e=n.execute(n.state,n.delay))break}while(n=t.shift());if(this._active=!1,e){for(;n=t.shift();)n.unsubscribe();throw e}}},t}(vn),yn=new(function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return i(t,n),t.prototype.flush=function(n){this._active=!0,this._scheduled=void 0;var t,e=this.actions,r=-1;n=n||e.shift();var i=e.length;do{if(t=n.execute(n.state,n.delay))break}while(++r<i&&(n=e.shift()));if(this._active=!1,t){for(;++r<i&&(n=e.shift());)n.unsubscribe();throw t}},t}(bn))(pn),mn=yn,wn=new bn(cn),gn=wn,xn=function(n){function t(t,e){var r=n.call(this,t,e)||this;return r.scheduler=t,r.work=e,r}return i(t,n),t.prototype.schedule=function(t,e){return void 0===e&&(e=0),e>0?n.prototype.schedule.call(this,t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)},t.prototype.execute=function(t,e){return e>0||this.closed?n.prototype.execute.call(this,t,e):this._execute(t,e)},t.prototype.requestAsyncId=function(t,e,r){return void 0===r&&(r=0),null!=r&&r>0||null==r&&this.delay>0?n.prototype.requestAsyncId.call(this,t,e,r):t.flush(this)},t}(cn),_n=new(function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return i(t,n),t}(bn))(xn),Sn=_n,En=function(n){function t(t,e){var r=n.call(this,t,e)||this;return r.scheduler=t,r.work=e,r}return i(t,n),t.prototype.requestAsyncId=function(t,e,r){return void 0===r&&(r=0),null!==r&&r>0?n.prototype.requestAsyncId.call(this,t,e,r):(t.actions.push(this),t._scheduled||(t._scheduled=Z.requestAnimationFrame((function(){return t.flush(void 0)}))))},t.prototype.recycleAsyncId=function(t,e,r){if(void 0===r&&(r=0),null!=r&&r>0||null==r&&this.delay>0)return n.prototype.recycleAsyncId.call(this,t,e,r);0===t.actions.length&&(Z.cancelAnimationFrame(e),t._scheduled=void 0)},t}(cn),An=new(function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return i(t,n),t.prototype.flush=function(n){this._active=!0,this._scheduled=void 0;var t,e=this.actions,r=-1;n=n||e.shift();var i=e.length;do{if(t=n.execute(n.state,n.delay))break}while(++r<i&&(n=e.shift()));if(this._active=!1,t){for(;++r<i&&(n=e.shift());)n.unsubscribe();throw t}},t}(bn))(En),Tn=An,In=function(n){function t(t,e){void 0===t&&(t=Cn),void 0===e&&(e=1/0);var r=n.call(this,t,(function(){return r.frame}))||this;return r.maxFrames=e,r.frame=0,r.index=-1,r}return i(t,n),t.prototype.flush=function(){for(var n,t,e=this.actions,r=this.maxFrames;(t=e[0])&&t.delay<=r&&(e.shift(),this.frame=t.delay,!(n=t.execute(t.state,t.delay))););if(n){for(;t=e.shift();)t.unsubscribe();throw n}},t.frameTimeFactor=10,t}(bn),Cn=function(n){function t(t,e,r){void 0===r&&(r=t.index+=1);var i=n.call(this,t,e)||this;return i.scheduler=t,i.work=e,i.index=r,i.active=!0,i.index=t.index=r,i}return i(t,n),t.prototype.schedule=function(e,r){if(void 0===r&&(r=0),Number.isFinite(r)){if(!this.id)return n.prototype.schedule.call(this,e,r);this.active=!1;var i=new t(this.scheduler,this.work);return this.add(i),i.schedule(e,r)}return v.EMPTY},t.prototype.requestAsyncId=function(n,e,r){void 0===r&&(r=0),this.delay=n.frame+r;var i=n.actions;return i.push(this),i.sort(t.sortActions),!0},t.prototype.recycleAsyncId=function(n,t,e){void 0===e&&(e=0)},t.prototype._execute=function(t,e){if(!0===this.active)return n.prototype._execute.call(this,t,e)},t.sortActions=function(n,t){return n.delay===t.delay?n.index===t.index?0:n.index>t.index?1:-1:n.delay>t.delay?1:-1},t}(cn),kn=new B((function(n){return n.complete()}));function On(n){return n?function(n){return new B((function(t){return n.schedule((function(){return t.complete()}))}))}(n):kn}function Rn(n){return n&&f(n.schedule)}function Pn(n){return n[n.length-1]}function Hn(n){return f(Pn(n))?n.pop():void 0}function Nn(n){return Rn(Pn(n))?n.pop():void 0}function jn(n,t){return"number"==typeof Pn(n)?n.pop():t}var Dn=function(n){return n&&"number"==typeof n.length&&"function"!=typeof n};function Mn(n){return f(null==n?void 0:n.then)}function Bn(n){return f(n[N])}function Ln(n){return Symbol.asyncIterator&&f(null==n?void 0:n[Symbol.asyncIterator])}function Fn(n){return new TypeError("You provided "+(null!==n&&"object"==typeof n?"an invalid object":"'"+n+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}var Un,Wn="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";function qn(n){return f(null==n?void 0:n[Wn])}function Gn(n){return s(this,arguments,(function(){var t,e,r;return o(this,(function(i){switch(i.label){case 0:t=n.getReader(),i.label=1;case 1:i.trys.push([1,,9,10]),i.label=2;case 2:return[4,l(t.read())];case 3:return e=i.sent(),r=e.value,e.done?[4,l(void 0)]:[3,5];case 4:return[2,i.sent()];case 5:return[4,l(r)];case 6:return[4,i.sent()];case 7:return i.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}}))}))}function zn(n){return f(null==n?void 0:n.getReader)}function Zn(n){if(n instanceof B)return n;if(null!=n){if(Bn(n))return i=n,new B((function(n){var t=i[N]();if(f(t.subscribe))return t.subscribe(n);throw new TypeError("Provided object does not correctly implement Symbol.observable")}));if(Dn(n))return r=n,new B((function(n){for(var t=0;t<r.length&&!n.closed;t++)n.next(r[t]);n.complete()}));if(Mn(n))return e=n,new B((function(n){e.then((function(t){n.closed||(n.next(t),n.complete())}),(function(t){return n.error(t)})).then(null,x)}));if(Ln(n))return Yn(n);if(qn(n))return t=n,new B((function(n){var e,r;try{for(var i=u(t),o=i.next();!o.done;o=i.next()){var c=o.value;if(n.next(c),n.closed)return}}catch(n){e={error:n}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}n.complete()}));if(zn(n))return Yn(Gn(n))}var t,e,r,i;throw Fn(n)}function Yn(n){return new B((function(t){(function(n,t){var e,r,i,c,a,l,s,f;return a=this,l=void 0,f=function(){var a,l;return o(this,(function(o){switch(o.label){case 0:o.trys.push([0,5,6,11]),e=function(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=n[Symbol.asyncIterator];return e?e.call(n):(n=u(n),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(e){t[e]=n[e]&&function(t){return new Promise((function(r,i){!function(n,t,e,r){Promise.resolve(r).then((function(t){n({value:t,done:e})}),t)}(r,i,(t=n[e](t)).done,t.value)}))}}}(n),o.label=1;case 1:return[4,e.next()];case 2:if((r=o.sent()).done)return[3,4];if(a=r.value,t.next(a),t.closed)return[2];o.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return l=o.sent(),i={error:l},[3,11];case 6:return o.trys.push([6,,9,10]),r&&!r.done&&(c=e.return)?[4,c.call(e)]:[3,8];case 7:o.sent(),o.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}}))},new((s=void 0)||(s=Promise))((function(n,t){function e(n){try{i(f.next(n))}catch(n){t(n)}}function r(n){try{i(f.throw(n))}catch(n){t(n)}}function i(t){var i;t.done?n(t.value):(i=t.value,i instanceof s?i:new s((function(n){n(i)}))).then(e,r)}i((f=f.apply(a,l||[])).next())}))})(n,t).catch((function(n){return t.error(n)}))}))}function Vn(n,t,e,r,i){void 0===r&&(r=0),void 0===i&&(i=!1);var o=t.schedule((function(){e(),i?n.add(this.schedule(null,r)):this.unsubscribe()}),r);if(n.add(o),!i)return o}function Xn(n,t){return void 0===t&&(t=0),U((function(e,r){e.subscribe(new W(r,(function(e){return Vn(r,n,(function(){return r.next(e)}),t)}),(function(){return Vn(r,n,(function(){return r.complete()}),t)}),(function(e){return Vn(r,n,(function(){return r.error(e)}),t)})))}))}function Kn(n,t){return void 0===t&&(t=0),U((function(e,r){r.add(n.schedule((function(){return e.subscribe(r)}),t))}))}function Jn(n,t){return new B((function(e){var r;return Vn(e,t,(function(){r=n[Wn](),Vn(e,t,(function(){var n,t,i;try{t=(n=r.next()).value,i=n.done}catch(n){return void e.error(n)}i?e.complete():e.next(t)}),0,!0)})),function(){return f(null==r?void 0:r.return)&&r.return()}}))}function Qn(n,t){if(!n)throw new Error("Iterable cannot be null");return new B((function(e){Vn(e,t,(function(){var r=n[Symbol.asyncIterator]();Vn(e,t,(function(){r.next().then((function(n){n.done?e.complete():e.next(n.value)}))}),0,!0)}))}))}function $n(n,t){if(null!=n){if(Bn(n))return function(n,t){return Zn(n).pipe(Kn(t),Xn(t))}(n,t);if(Dn(n))return function(n,t){return new B((function(e){var r=0;return t.schedule((function(){r===n.length?e.complete():(e.next(n[r++]),e.closed||this.schedule())}))}))}(n,t);if(Mn(n))return function(n,t){return Zn(n).pipe(Kn(t),Xn(t))}(n,t);if(Ln(n))return Qn(n,t);if(qn(n))return Jn(n,t);if(zn(n))return function(n,t){return Qn(Gn(n),t)}(n,t)}throw Fn(n)}function nt(n,t){return t?$n(n,t):Zn(n)}function tt(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];var e=Nn(n);return nt(n,e)}function et(n,t){var e=f(n)?n:function(){return n},r=function(n){return n.error(e())};return new B(t?function(n){return t.schedule(r,0,n)}:r)}!function(n){n.NEXT="N",n.ERROR="E",n.COMPLETE="C"}(Un||(Un={}));var rt=function(){function n(n,t,e){this.kind=n,this.value=t,this.error=e,this.hasValue="N"===n}return n.prototype.observe=function(n){return it(this,n)},n.prototype.do=function(n,t,e){var r=this,i=r.kind,o=r.value,u=r.error;return"N"===i?null==n?void 0:n(o):"E"===i?null==t?void 0:t(u):null==e?void 0:e()},n.prototype.accept=function(n,t,e){var r;return f(null===(r=n)||void 0===r?void 0:r.next)?this.observe(n):this.do(n,t,e)},n.prototype.toObservable=function(){var n=this,t=n.kind,e=n.value,r=n.error,i="N"===t?tt(e):"E"===t?et((function(){return r})):"C"===t?kn:0;if(!i)throw new TypeError("Unexpected notification kind "+t);return i},n.createNext=function(t){return new n("N",t)},n.createError=function(t){return new n("E",void 0,t)},n.createComplete=function(){return n.completeNotification},n.completeNotification=new n("C"),n}();function it(n,t){var e,r,i,o=n,u=o.kind,c=o.value,a=o.error;if("string"!=typeof u)throw new TypeError('Invalid notification, missing "kind"');"N"===u?null===(e=t.next)||void 0===e||e.call(t,c):"E"===u?null===(r=t.error)||void 0===r||r.call(t,a):null===(i=t.complete)||void 0===i||i.call(t)}function ot(n){return!!n&&(n instanceof B||f(n.lift)&&f(n.subscribe))}var ut=d((function(n){return function(){n(this),this.name="EmptyError",this.message="no elements in sequence"}}));function ct(n,t){var e="object"==typeof t;return new Promise((function(r,i){var o,u=!1;n.subscribe({next:function(n){o=n,u=!0},error:i,complete:function(){u?r(o):e?r(t.defaultValue):i(new ut)}})}))}function at(n,t){var e="object"==typeof t;return new Promise((function(r,i){var o=new k({next:function(n){r(n),o.unsubscribe()},error:i,complete:function(){e?r(t.defaultValue):i(new ut)}});n.subscribe(o)}))}var lt=d((function(n){return function(){n(this),this.name="ArgumentOutOfRangeError",this.message="argument out of range"}})),st=d((function(n){return function(t){n(this),this.name="NotFoundError",this.message=t}})),ft=d((function(n){return function(t){n(this),this.name="SequenceError",this.message=t}}));function dt(n){return n instanceof Date&&!isNaN(n)}var ht=d((function(n){return function(t){void 0===t&&(t=null),n(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=t}}));function pt(n,t){var e=dt(n)?{first:n}:"number"==typeof n?{each:n}:n,r=e.first,i=e.each,o=e.with,u=void 0===o?vt:o,c=e.scheduler,a=void 0===c?null!=t?t:wn:c,l=e.meta,s=void 0===l?null:l;if(null==r&&null==i)throw new TypeError("No timeout provided.");return U((function(n,t){var e,o,c=null,l=0,f=function(n){o=Vn(t,a,(function(){try{e.unsubscribe(),Zn(u({meta:s,lastValue:c,seen:l})).subscribe(t)}catch(n){t.error(n)}}),n)};e=n.subscribe(new W(t,(function(n){null==o||o.unsubscribe(),l++,t.next(c=n),i>0&&f(i)}),void 0,void 0,(function(){(null==o?void 0:o.closed)||null==o||o.unsubscribe(),c=null}))),f(null!=r?"number"==typeof r?r:+r-a.now():i)}))}function vt(n){throw new ht(n)}function bt(n,t){return U((function(e,r){var i=0;e.subscribe(new W(r,(function(e){r.next(n.call(t,e,i++))})))}))}var yt=Array.isArray;function mt(n){return bt((function(t){return function(n,t){return yt(t)?n.apply(void 0,a([],c(t))):n(t)}(n,t)}))}function wt(n,t,e,r){if(e){if(!Rn(e))return function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];return wt(n,t,r).apply(this,i).pipe(mt(e))};r=e}return r?function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return wt(n,t).apply(this,e).pipe(Kn(r),Xn(r))}:function(){for(var e=this,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var o=new rn,u=!0;return new B((function(i){var l=o.subscribe(i);if(u){u=!1;var s=!1,f=!1;t.apply(e,a(a([],c(r)),[function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(n){var r=t.shift();if(null!=r)return void o.error(r)}o.next(1<t.length?t:t[0]),f=!0,s&&o.complete()}])),f&&o.complete(),s=!0}return l}))}}function gt(n,t,e){return wt(!1,n,t,e)}function xt(n,t,e){return wt(!0,n,t,e)}var _t=Array.isArray,St=Object.getPrototypeOf,Et=Object.prototype,At=Object.keys;function Tt(n){if(1===n.length){var t=n[0];if(_t(t))return{args:t,keys:null};if((r=t)&&"object"==typeof r&&St(r)===Et){var e=At(t);return{args:e.map((function(n){return t[n]})),keys:e}}}var r;return{args:n,keys:null}}function It(n,t){return n.reduce((function(n,e,r){return n[e]=t[r],n}),{})}function Ct(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];var e=Nn(n),r=Hn(n),i=Tt(n),o=i.args,u=i.keys;if(0===o.length)return nt([],e);var c=new B(kt(o,e,u?function(n){return It(u,n)}:j));return r?c.pipe(mt(r)):c}function kt(n,t,e){return void 0===e&&(e=j),function(r){Ot(t,(function(){for(var i=n.length,o=new Array(i),u=i,c=i,a=function(i){Ot(t,(function(){var a=nt(n[i],t),l=!1;a.subscribe(new W(r,(function(n){o[i]=n,l||(l=!0,c--),c||r.next(e(o.slice()))}),(function(){--u||r.complete()})))}),r)},l=0;l<i;l++)a(l)}),r)}}function Ot(n,t,e){n?Vn(e,n,t):t()}function Rt(n,t,e,r,i,o,u,c){var a=[],l=0,s=0,f=!1,d=function(){!f||a.length||l||t.complete()},h=function(n){return l<r?p(n):a.push(n)},p=function(n){o&&t.next(n),l++;var c=!1;Zn(e(n,s++)).subscribe(new W(t,(function(n){null==i||i(n),o?h(n):t.next(n)}),(function(){c=!0}),void 0,(function(){if(c)try{l--;for(var n=function(){var n=a.shift();u?Vn(t,u,(function(){return p(n)})):p(n)};a.length&&l<r;)n();d()}catch(n){t.error(n)}})))};return n.subscribe(new W(t,h,(function(){f=!0,d()}))),function(){null==c||c()}}function Pt(n,t,e){return void 0===e&&(e=1/0),f(t)?Pt((function(e,r){return bt((function(n,i){return t(e,n,r,i)}))(Zn(n(e,r)))}),e):("number"==typeof t&&(e=t),U((function(t,r){return Rt(t,r,n,e)})))}function Ht(n){return void 0===n&&(n=1/0),Pt(j,n)}function Nt(){return Ht(1)}function jt(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return Nt()(nt(n,Nn(n)))}function Dt(n){return new B((function(t){Zn(n()).subscribe(t)}))}var Mt={connector:function(){return new Q},resetOnDisconnect:!0};function Bt(n,t){void 0===t&&(t=Mt);var e=null,r=t.connector,i=t.resetOnDisconnect,o=void 0===i||i,u=r(),c=new B((function(n){return u.subscribe(n)}));return c.connect=function(){return e&&!e.closed||(e=Dt((function(){return n})).subscribe(u),o&&e.add((function(){return u=r()}))),e},c}function Lt(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];var e=Hn(n),r=Tt(n),i=r.args,o=r.keys,u=new B((function(n){var t=i.length;if(t)for(var e=new Array(t),r=t,u=t,c=function(t){var c=!1;Zn(i[t]).subscribe(new W(n,(function(n){c||(c=!0,u--),e[t]=n}),(function(){return r--}),void 0,(function(){r&&c||(u||n.next(o?It(o,e):e),n.complete())})))},a=0;a<t;a++)c(a);else n.complete()}));return e?u.pipe(mt(e)):u}var Ft=["addListener","removeListener"],Ut=["addEventListener","removeEventListener"],Wt=["on","off"];function qt(n,t,e,r){if(f(e)&&(r=e,e=void 0),r)return qt(n,t,e).pipe(mt(r));var i=c(function(n){return f(n.addEventListener)&&f(n.removeEventListener)}(n)?Ut.map((function(r){return function(i){return n[r](t,i,e)}})):function(n){return f(n.addListener)&&f(n.removeListener)}(n)?Ft.map(Gt(n,t)):function(n){return f(n.on)&&f(n.off)}(n)?Wt.map(Gt(n,t)):[],2),o=i[0],u=i[1];if(!o&&Dn(n))return Pt((function(n){return qt(n,t,e)}))(Zn(n));if(!o)throw new TypeError("Invalid event target");return new B((function(n){var t=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return n.next(1<t.length?t:t[0])};return o(t),function(){return u(t)}}))}function Gt(n,t){return function(e){return function(r){return n[e](t,r)}}}function zt(n,t,e){return e?zt(n,t).pipe(mt(e)):new B((function(e){var r=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return e.next(1===n.length?n[0]:n)},i=n(r);return f(t)?function(){return t(r,i)}:void 0}))}function Zt(n,t,e,r,i){var u,c,a,l;function s(){var n;return o(this,(function(r){switch(r.label){case 0:n=l,r.label=1;case 1:return t&&!t(n)?[3,4]:[4,a(n)];case 2:r.sent(),r.label=3;case 3:return n=e(n),[3,1];case 4:return[2]}}))}return 1===arguments.length?(l=(u=n).initialState,t=u.condition,e=u.iterate,c=u.resultSelector,a=void 0===c?j:c,i=u.scheduler):(l=n,!r||Rn(r)?(a=j,i=r):a=r),Dt(i?function(){return Jn(s(),i)}:s)}function Yt(n,t,e){return Dt((function(){return n()?t:e}))}function Vt(n,t,e){void 0===n&&(n=0),void 0===e&&(e=gn);var r=-1;return null!=t&&(Rn(t)?e=t:r=t),new B((function(t){var i=dt(n)?+n-e.now():n;i<0&&(i=0);var o=0;return e.schedule((function(){t.closed||(t.next(o++),0<=r?this.schedule(void 0,r):t.complete())}),i)}))}function Xt(n,t){return void 0===n&&(n=0),void 0===t&&(t=wn),n<0&&(n=0),Vt(n,n,t)}function Kt(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];var e=Nn(n),r=jn(n,1/0),i=n;return i.length?1===i.length?Zn(i[0]):Ht(r)(nt(i,e)):kn}var Jt=new B(_);function Qt(){return Jt}var $t=Array.isArray;function ne(n){return 1===n.length&&$t(n[0])?n[0]:n}function te(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];var e=ne(n);return U((function(n,t){var r=a([n],c(e)),i=function(){if(!t.closed)if(r.length>0){var n=void 0;try{n=Zn(r.shift())}catch(n){return void i()}var e=new W(t,void 0,_,_);t.add(n.subscribe(e)),e.add(i)}else t.complete()};i()}))}function ee(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return te(ne(n))(kn)}function re(n,t){return nt(Object.entries(n),t)}function ie(n,t){return function(e,r){return!n.call(t,e,r)}}function oe(n,t){return U((function(e,r){var i=0;e.subscribe(new W(r,(function(e){return n.call(t,e,i++)&&r.next(e)})))}))}function ue(n,t,e){return[oe(t,e)(Zn(n)),oe(ie(t,e))(Zn(n))]}function ce(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return 1===(n=ne(n)).length?Zn(n[0]):new B(ae(n))}function ae(n){return function(t){for(var e=[],r=function(r){e.push(Zn(n[r]).subscribe(new W(t,(function(n){if(e){for(var i=0;i<e.length;i++)i!==r&&e[i].unsubscribe();e=null}t.next(n)}))))},i=0;e&&!t.closed&&i<n.length;i++)r(i)}}function le(n,t,e){if(null==t&&(t=n,n=0),t<=0)return kn;var r=t+n;return new B(e?function(t){var i=n;return e.schedule((function(){i<r?(t.next(i++),this.schedule()):t.complete()}))}:function(t){for(var e=n;e<r&&!t.closed;)t.next(e++);t.complete()})}function se(n,t){return new B((function(e){var r=n(),i=t(r);return(i?Zn(i):kn).subscribe(e),function(){r&&r.unsubscribe()}}))}function fe(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];var e=Hn(n),r=ne(n);return r.length?new B((function(n){var t=r.map((function(){return[]})),i=r.map((function(){return!1}));n.add((function(){t=i=null}));for(var o=function(o){Zn(r[o]).subscribe(new W(n,(function(r){if(t[o].push(r),t.every((function(n){return n.length}))){var u=t.map((function(n){return n.shift()}));n.next(e?e.apply(void 0,a([],c(u))):u),t.some((function(n,t){return!n.length&&i[t]}))&&n.complete()}}),(function(){i[o]=!0,!t[o].length&&n.complete()})))},u=0;!n.closed&&u<r.length;u++)o(u);return function(){t=i=null}})):kn}function de(n){return U((function(t,e){var r=!1,i=null,o=null,u=!1,c=function(){if(null==o||o.unsubscribe(),o=null,r){r=!1;var n=i;i=null,e.next(n)}u&&e.complete()},a=function(){o=null,u&&e.complete()};t.subscribe(new W(e,(function(t){r=!0,i=t,o||Zn(n(t)).subscribe(o=new W(e,c,a))}),(function(){u=!0,(!r||!o||o.closed)&&e.complete()})))}))}function he(n,t){return void 0===t&&(t=gn),de((function(){return Vt(n,t)}))}function pe(n){return U((function(t,e){var r=[];return t.subscribe(new W(e,(function(n){return r.push(n)}),(function(){e.next(r),e.complete()}))),n.subscribe(new W(e,(function(){var n=r;r=[],e.next(n)}),_)),function(){r=null}}))}function ve(n,t){return void 0===t&&(t=null),t=null!=t?t:n,U((function(e,r){var i=[],o=0;e.subscribe(new W(r,(function(e){var c,a,l,s,f=null;o++%t==0&&i.push([]);try{for(var d=u(i),h=d.next();!h.done;h=d.next())(y=h.value).push(e),n<=y.length&&(f=null!=f?f:[]).push(y)}catch(n){c={error:n}}finally{try{h&&!h.done&&(a=d.return)&&a.call(d)}finally{if(c)throw c.error}}if(f)try{for(var v=u(f),b=v.next();!b.done;b=v.next()){var y=b.value;p(i,y),r.next(y)}}catch(n){l={error:n}}finally{try{b&&!b.done&&(s=v.return)&&s.call(v)}finally{if(l)throw l.error}}}),(function(){var n,t;try{for(var e=u(i),o=e.next();!o.done;o=e.next()){var c=o.value;r.next(c)}}catch(t){n={error:t}}finally{try{o&&!o.done&&(t=e.return)&&t.call(e)}finally{if(n)throw n.error}}r.complete()}),void 0,(function(){i=null})))}))}function be(n){for(var t,e,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];var o=null!==(t=Nn(r))&&void 0!==t?t:wn,c=null!==(e=r[0])&&void 0!==e?e:null,a=r[1]||1/0;return U((function(t,e){var r=[],i=!1,l=function(n){var t=n.buffer;n.subs.unsubscribe(),p(r,n),e.next(t),i&&s()},s=function(){if(r){var t=new v;e.add(t);var i={buffer:[],subs:t};r.push(i),Vn(t,o,(function(){return l(i)}),n)}};null!==c&&c>=0?Vn(e,o,s,c,!0):i=!0,s();var f=new W(e,(function(n){var t,e,i=r.slice();try{for(var o=u(i),c=o.next();!c.done;c=o.next()){var s=c.value,f=s.buffer;f.push(n),a<=f.length&&l(s)}}catch(n){t={error:n}}finally{try{c&&!c.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}}),(function(){for(;null==r?void 0:r.length;)e.next(r.shift().buffer);null==f||f.unsubscribe(),e.complete(),e.unsubscribe()}),void 0,(function(){return r=null}));t.subscribe(f)}))}function ye(n,t){return U((function(e,r){var i=[];Zn(n).subscribe(new W(r,(function(n){var e=[];i.push(e);var o=new v;o.add(Zn(t(n)).subscribe(new W(r,(function(){p(i,e),r.next(e),o.unsubscribe()}),_)))}),_)),e.subscribe(new W(r,(function(n){var t,e;try{for(var r=u(i),o=r.next();!o.done;o=r.next())o.value.push(n)}catch(n){t={error:n}}finally{try{o&&!o.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}}),(function(){for(;i.length>0;)r.next(i.shift());r.complete()})))}))}function me(n){return U((function(t,e){var r=null,i=null,o=function(){null==i||i.unsubscribe();var t=r;r=[],t&&e.next(t),Zn(n()).subscribe(i=new W(e,o,_))};o(),t.subscribe(new W(e,(function(n){return null==r?void 0:r.push(n)}),(function(){r&&e.next(r),e.complete()}),void 0,(function(){return r=i=null})))}))}function we(n){return U((function(t,e){var r,i=null,o=!1;i=t.subscribe(new W(e,void 0,void 0,(function(u){r=Zn(n(u,we(n)(t))),i?(i.unsubscribe(),i=null,r.subscribe(e)):o=!0}))),o&&(i.unsubscribe(),i=null,r.subscribe(e))}))}function ge(n,t,e,r,i){return function(o,u){var c=e,a=t,l=0;o.subscribe(new W(u,(function(t){var e=l++;a=c?n(a,t,e):(c=!0,t),r&&u.next(a)}),i&&function(){c&&u.next(a),u.complete()}))}}function xe(n,t){return U(ge(n,t,arguments.length>=2,!1,!0))}var _e=function(n,t){return n.push(t),n};function Se(){return U((function(n,t){xe(_e,[])(n).subscribe(t)}))}function Ee(n,t){return D(Se(),Pt((function(t){return n(t)})),t?mt(t):j)}function Ae(n){return Ee(Ct,n)}var Te=Ae;function Ie(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];var e=Hn(n);return e?D(Ie.apply(void 0,a([],c(n))),mt(e)):U((function(t,e){kt(a([t],c(ne(n))))(e)}))}function Ce(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return Ie.apply(void 0,a([],c(n)))}function ke(n,t){return f(t)?Pt(n,t,1):Pt(n,1)}function Oe(n,t){return f(t)?ke((function(){return n}),t):ke((function(){return n}))}function Re(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];var e=Nn(n);return U((function(t,r){Nt()(nt(a([t],c(n)),e)).subscribe(r)}))}function Pe(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return Re.apply(void 0,a([],c(n)))}var He={connector:function(){return new Q}};function Ne(n,t){void 0===t&&(t=He);var e=t.connector;return U((function(t,r){var i,o=e();nt(n((i=o,new B((function(n){return i.subscribe(n)}))))).subscribe(r),r.add(t.subscribe(o))}))}function je(n){return xe((function(t,e,r){return!n||n(e,r)?t+1:t}),0)}function De(n){return U((function(t,e){var r=!1,i=null,o=null,u=function(){if(null==o||o.unsubscribe(),o=null,r){r=!1;var n=i;i=null,e.next(n)}};t.subscribe(new W(e,(function(t){null==o||o.unsubscribe(),r=!0,i=t,o=new W(e,u,_),Zn(n(t)).subscribe(o)}),(function(){u(),e.complete()}),void 0,(function(){i=o=null})))}))}function Me(n,t){return void 0===t&&(t=wn),U((function(e,r){var i=null,o=null,u=null,c=function(){if(i){i.unsubscribe(),i=null;var n=o;o=null,r.next(n)}};function a(){var e=u+n,o=t.now();if(o<e)return i=this.schedule(void 0,e-o),void r.add(i);c()}e.subscribe(new W(r,(function(e){o=e,u=t.now(),i||(i=t.schedule(a,n),r.add(i))}),(function(){c(),r.complete()}),void 0,(function(){o=i=null})))}))}function Be(n){return U((function(t,e){var r=!1;t.subscribe(new W(e,(function(n){r=!0,e.next(n)}),(function(){r||e.next(n),e.complete()})))}))}function Le(n){return n<=0?function(){return kn}:U((function(t,e){var r=0;t.subscribe(new W(e,(function(t){++r<=n&&(e.next(t),n<=r&&e.complete())})))}))}function Fe(){return U((function(n,t){n.subscribe(new W(t,_))}))}function Ue(n){return bt((function(){return n}))}function We(n,t){return t?function(e){return jt(t.pipe(Le(1),Fe()),e.pipe(We(n)))}:Pt((function(t,e){return n(t,e).pipe(Le(1),Ue(t))}))}function qe(n,t){void 0===t&&(t=wn);var e=Vt(n,t);return We((function(){return e}))}function Ge(){return U((function(n,t){n.subscribe(new W(t,(function(n){return it(n,t)})))}))}function ze(n,t){return U((function(e,r){var i=new Set;e.subscribe(new W(r,(function(t){var e=n?n(t):t;i.has(e)||(i.add(e),r.next(t))}))),null==t||t.subscribe(new W(r,(function(){return i.clear()}),_))}))}function Ze(n,t){return void 0===t&&(t=j),n=null!=n?n:Ye,U((function(e,r){var i,o=!0;e.subscribe(new W(r,(function(e){var u=t(e);!o&&n(i,u)||(o=!1,i=u,r.next(e))})))}))}function Ye(n,t){return n===t}function Ve(n,t){return Ze((function(e,r){return t?t(e[n],r[n]):e[n]===r[n]}))}function Xe(n){return void 0===n&&(n=Ke),U((function(t,e){var r=!1;t.subscribe(new W(e,(function(n){r=!0,e.next(n)}),(function(){return r?e.complete():e.error(n())})))}))}function Ke(){return new ut}function Je(n,t){if(n<0)throw new lt;var e=arguments.length>=2;return function(r){return r.pipe(oe((function(t,e){return e===n})),Le(1),e?Be(t):Xe((function(){return new lt})))}}function Qe(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return function(t){return jt(t,tt.apply(void 0,a([],c(n))))}}function $e(n,t){return U((function(e,r){var i=0;e.subscribe(new W(r,(function(o){n.call(t,o,i++,e)||(r.next(!1),r.complete())}),(function(){r.next(!0),r.complete()})))}))}function nr(){return U((function(n,t){var e=!1,r=null;n.subscribe(new W(t,(function(n){r||(r=Zn(n).subscribe(new W(t,void 0,(function(){r=null,e&&t.complete()}))))}),(function(){e=!0,!r&&t.complete()})))}))}var tr=nr;function er(n,t){return t?function(e){return e.pipe(er((function(e,r){return Zn(n(e,r)).pipe(bt((function(n,i){return t(e,n,r,i)})))})))}:U((function(t,e){var r=0,i=null,o=!1;t.subscribe(new W(e,(function(t){i||(i=new W(e,void 0,(function(){i=null,o&&e.complete()})),Zn(n(t,r++)).subscribe(i))}),(function(){o=!0,!i&&e.complete()})))}))}function rr(n,t,e){return void 0===t&&(t=1/0),t=(t||0)<1?1/0:t,U((function(r,i){return Rt(r,i,n,t,void 0,!0,e)}))}function ir(n){return U((function(t,e){try{t.subscribe(e)}finally{e.add(n)}}))}function or(n,t){return U(ur(n,t,"value"))}function ur(n,t,e){var r="index"===e;return function(e,i){var o=0;e.subscribe(new W(i,(function(u){var c=o++;n.call(t,u,c,e)&&(i.next(r?c:u),i.complete())}),(function(){i.next(r?-1:void 0),i.complete()})))}}function cr(n,t){return U(ur(n,t,"index"))}function ar(n,t){var e=arguments.length>=2;return function(r){return r.pipe(n?oe((function(t,e){return n(t,e,r)})):j,Le(1),e?Be(t):Xe((function(){return new ut})))}}function lr(n,t,e,r){return U((function(i,o){var u;t&&"function"!=typeof t?(e=t.duration,u=t.element,r=t.connector):u=t;var c=new Map,a=function(n){c.forEach(n),n(o)},l=function(n){return a((function(t){return t.error(n)}))},s=new sr(o,(function(t){try{var i=n(t),a=c.get(i);if(!a){c.set(i,a=r?r():new Q);var f=(h=i,p=a,(v=new B((function(n){s.activeGroups++;var t=p.subscribe(n);return function(){t.unsubscribe(),0==--s.activeGroups&&s.teardownAttempted&&s.unsubscribe()}}))).key=h,v);if(o.next(f),e){var d=new W(a,(function(){a.complete(),null==d||d.unsubscribe()}),void 0,void 0,(function(){return c.delete(i)}));s.add(Zn(e(f)).subscribe(d))}}a.next(u?u(t):t)}catch(n){l(n)}var h,p,v}),(function(){return a((function(n){return n.complete()}))}),l,(function(){return c.clear()}));i.subscribe(s)}))}var sr=function(n){function t(){var t=null!==n&&n.apply(this,arguments)||this;return t.activeGroups=0,t.teardownAttempted=!1,t}return i(t,n),t.prototype.unsubscribe=function(){this.teardownAttempted=!0,0===this.activeGroups&&n.prototype.unsubscribe.call(this)},t}(W);function fr(){return U((function(n,t){n.subscribe(new W(t,(function(){t.next(!1),t.complete()}),(function(){t.next(!0),t.complete()})))}))}function dr(n){return n<=0?function(){return kn}:U((function(t,e){var r=[];t.subscribe(new W(e,(function(t){r.push(t),n<r.length&&r.shift()}),(function(){var n,t;try{for(var i=u(r),o=i.next();!o.done;o=i.next()){var c=o.value;e.next(c)}}catch(t){n={error:t}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(n)throw n.error}}e.complete()}),void 0,(function(){r=null})))}))}function hr(n,t){var e=arguments.length>=2;return function(r){return r.pipe(n?oe((function(t,e){return n(t,e,r)})):j,dr(1),e?Be(t):Xe((function(){return new ut})))}}function pr(){return U((function(n,t){n.subscribe(new W(t,(function(n){t.next(rt.createNext(n))}),(function(){t.next(rt.createComplete()),t.complete()}),(function(n){t.next(rt.createError(n)),t.complete()})))}))}function vr(n){return xe(f(n)?function(t,e){return n(t,e)>0?t:e}:function(n,t){return n>t?n:t})}var br=Pt;function yr(n,t,e){return void 0===e&&(e=1/0),f(t)?Pt((function(){return n}),t,e):("number"==typeof t&&(e=t),Pt((function(){return n}),e))}function mr(n,t,e){return void 0===e&&(e=1/0),U((function(r,i){var o=t;return Rt(r,i,(function(t,e){return n(o,t,e)}),e,(function(n){o=n}),!1,void 0,(function(){return o=null}))}))}function wr(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];var e=Nn(n),r=jn(n,1/0);return n=ne(n),U((function(t,i){Ht(r)(nt(a([t],c(n)),e)).subscribe(i)}))}function gr(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return wr.apply(void 0,a([],c(n)))}function xr(n){return xe(f(n)?function(t,e){return n(t,e)<0?t:e}:function(n,t){return n<t?n:t})}function _r(n,t){var e=f(n)?n:function(){return n};return f(t)?Ne(t,{connector:e}):function(n){return new G(n,e)}}function Sr(){return U((function(n,t){var e,r=!1;n.subscribe(new W(t,(function(n){var i=e;e=n,r&&t.next([i,n]),r=!0})))}))}function Er(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];var e=n.length;if(0===e)throw new Error("list of properties cannot be empty.");return bt((function(t){for(var r=t,i=0;i<e;i++){var o=null==r?void 0:r[n[i]];if(void 0===o)return;r=o}return r}))}function Ar(n){return n?function(t){return Ne(n)(t)}:function(n){return _r(new Q)(n)}}function Tr(n){return function(t){var e=new nn(n);return new G(t,(function(){return e}))}}function Ir(){return function(n){var t=new rn;return new G(n,(function(){return t}))}}function Cr(n,t,e,r){e&&!f(e)&&(r=e);var i=f(e)?e:void 0;return function(e){return _r(new en(n,t,r),i)(e)}}function kr(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return n.length?U((function(t,e){ae(a([t],c(n)))(e)})):j}function Or(n){return void 0===n&&(n=1/0),n<=0?function(){return kn}:U((function(t,e){var r,i=0,o=function(){var u=!1;r=t.subscribe(new W(e,void 0,(function(){++i<n?r?(r.unsubscribe(),r=null,o()):u=!0:e.complete()}))),u&&(r.unsubscribe(),r=null,o())};o()}))}function Rr(n){return U((function(t,e){var r,i,o=!1,u=!1,c=!1,a=function(){return c&&u&&(e.complete(),!0)},l=function(){c=!1,r=t.subscribe(new W(e,void 0,(function(){c=!0,!a()&&(i||(i=new Q,n(i).subscribe(new W(e,(function(){r?l():o=!0}),(function(){u=!0,a()})))),i).next()}))),o&&(r.unsubscribe(),r=null,o=!1,l())};l()}))}function Pr(n){var t;void 0===n&&(n=1/0);var e=(t=n&&"object"==typeof n?n:{count:n}).count,r=void 0===e?1/0:e,i=t.delay,o=t.resetOnSuccess,u=void 0!==o&&o;return r<=0?j:U((function(n,t){var e,o=0,c=function(){var a=!1;e=n.subscribe(new W(t,(function(n){u&&(o=0),t.next(n)}),void 0,(function(n){if(o++<r){var u=function(){e?(e.unsubscribe(),e=null,c()):a=!0};if(null!=i){var l="number"==typeof i?Vt(i):Zn(i(n,o)),s=new W(t,(function(){s.unsubscribe(),u()}),(function(){t.complete()}));l.subscribe(s)}else u()}else t.error(n)}))),a&&(e.unsubscribe(),e=null,c())};c()}))}function Hr(n){return U((function(t,e){var r,i,o=!1,u=function(){r=t.subscribe(new W(e,void 0,void 0,(function(t){i||(i=new Q,n(i).subscribe(new W(e,(function(){return r?u():o=!0})))),i&&i.next(t)}))),o&&(r.unsubscribe(),r=null,o=!1,u())};u()}))}function Nr(n){return U((function(t,e){var r=!1,i=null;t.subscribe(new W(e,(function(n){r=!0,i=n}))),n.subscribe(new W(e,(function(){if(r){r=!1;var n=i;i=null,e.next(n)}}),_))}))}function jr(n,t){return void 0===t&&(t=wn),Nr(Xt(n,t))}function Dr(n,t){return U(ge(n,t,arguments.length>=2,!0))}function Mr(n,t){return void 0===t&&(t=function(n,t){return n===t}),U((function(e,r){var i={buffer:[],complete:!1},o={buffer:[],complete:!1},u=function(n){r.next(n),r.complete()},c=function(n,e){var i=new W(r,(function(r){var i=e.buffer,o=e.complete;0===i.length?o?u(!1):n.buffer.push(r):!t(r,i.shift())&&u(!1)}),(function(){n.complete=!0;var t=e.complete,r=e.buffer;t&&u(0===r.length),null==i||i.unsubscribe()}));return i};e.subscribe(c(i,o)),n.subscribe(c(o,i))}))}function Br(n){void 0===n&&(n={});var t=n.connector,e=void 0===t?function(){return new Q}:t,r=n.resetOnError,i=void 0===r||r,o=n.resetOnComplete,u=void 0===o||o,c=n.resetOnRefCountZero,a=void 0===c||c;return function(n){var t=null,r=null,o=null,c=0,l=!1,s=!1,f=function(){null==r||r.unsubscribe(),r=null},d=function(){f(),t=o=null,l=s=!1},h=function(){var n=t;d(),null==n||n.unsubscribe()};return U((function(n,p){c++,s||l||f();var v=o=null!=o?o:e();p.add((function(){0!=--c||s||l||(r=Lr(h,a))})),v.subscribe(p),t||(t=new k({next:function(n){return v.next(n)},error:function(n){s=!0,f(),r=Lr(d,i,n),v.error(n)},complete:function(){l=!0,f(),r=Lr(d,u),v.complete()}}),nt(n).subscribe(t))}))(n)}}function Lr(n,t){for(var e=[],r=2;r<arguments.length;r++)e[r-2]=arguments[r];return!0===t?(n(),null):!1===t?null:t.apply(void 0,a([],c(e))).pipe(Le(1)).subscribe((function(){return n()}))}function Fr(n,t,e){var r,i,o,u=!1;return n&&"object"==typeof n?(o=null!==(r=n.bufferSize)&&void 0!==r?r:1/0,t=null!==(i=n.windowTime)&&void 0!==i?i:1/0,u=!!n.refCount,e=n.scheduler):o=null!=n?n:1/0,Br({connector:function(){return new en(o,t,e)},resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:u})}function Ur(n){return U((function(t,e){var r,i=!1,o=!1,u=0;t.subscribe(new W(e,(function(c){o=!0,n&&!n(c,u++,t)||(i&&e.error(new ft("Too many matching values")),i=!0,r=c)}),(function(){i?(e.next(r),e.complete()):e.error(o?new st("No matching values"):new ut)})))}))}function Wr(n){return oe((function(t,e){return n<=e}))}function qr(n){return n<=0?j:U((function(t,e){var r=new Array(n),i=0;return t.subscribe(new W(e,(function(t){var o=i++;if(o<n)r[o]=t;else{var u=o%n,c=r[u];r[u]=t,e.next(c)}}))),function(){r=null}}))}function Gr(n){return U((function(t,e){var r=!1,i=new W(e,(function(){null==i||i.unsubscribe(),r=!0}),_);Zn(n).subscribe(i),t.subscribe(new W(e,(function(n){return r&&e.next(n)})))}))}function zr(n){return U((function(t,e){var r=!1,i=0;t.subscribe(new W(e,(function(t){return(r||(r=!n(t,i++)))&&e.next(t)})))}))}function Zr(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];var e=Nn(n);return U((function(t,r){(e?jt(n,t,e):jt(n,t)).subscribe(r)}))}function Yr(n,t){return U((function(e,r){var i=null,o=0,u=!1,c=function(){return u&&!i&&r.complete()};e.subscribe(new W(r,(function(e){null==i||i.unsubscribe();var u=0,a=o++;Zn(n(e,a)).subscribe(i=new W(r,(function(n){return r.next(t?t(e,n,a,u++):n)}),(function(){i=null,c()})))}),(function(){u=!0,c()})))}))}function Vr(){return Yr(j)}function Xr(n,t){return f(t)?Yr((function(){return n}),t):Yr((function(){return n}))}function Kr(n,t){return U((function(e,r){var i=t;return Yr((function(t,e){return n(i,t,e)}),(function(n,t){return i=t,t}))(e).subscribe(r),function(){i=null}}))}function Jr(n){return U((function(t,e){Zn(n).subscribe(new W(e,(function(){return e.complete()}),_)),!e.closed&&t.subscribe(e)}))}function Qr(n,t){return void 0===t&&(t=!1),U((function(e,r){var i=0;e.subscribe(new W(r,(function(e){var o=n(e,i++);(o||t)&&r.next(e),!o&&r.complete()})))}))}function $r(n,t,e){var r=f(n)||t||e?{next:n,error:t,complete:e}:n;return r?U((function(n,t){var e;null===(e=r.subscribe)||void 0===e||e.call(r);var i=!0;n.subscribe(new W(t,(function(n){var e;null===(e=r.next)||void 0===e||e.call(r,n),t.next(n)}),(function(){var n;i=!1,null===(n=r.complete)||void 0===n||n.call(r),t.complete()}),(function(n){var e;i=!1,null===(e=r.error)||void 0===e||e.call(r,n),t.error(n)}),(function(){var n,t;i&&(null===(n=r.unsubscribe)||void 0===n||n.call(r)),null===(t=r.finalize)||void 0===t||t.call(r)})))})):j}var ni={leading:!0,trailing:!1};function ti(n,t){var e=void 0===t?ni:t,r=e.leading,i=e.trailing;return U((function(t,e){var o=!1,u=null,c=null,a=!1,l=function(){null==c||c.unsubscribe(),c=null,i&&(d(),a&&e.complete())},s=function(){c=null,a&&e.complete()},f=function(t){return c=Zn(n(t)).subscribe(new W(e,l,s))},d=function(){if(o){o=!1;var n=u;u=null,e.next(n),!a&&f(n)}};t.subscribe(new W(e,(function(n){o=!0,u=n,(!c||c.closed)&&(r?d():f(n))}),(function(){a=!0,(!(i&&o&&c)||c.closed)&&e.complete()})))}))}function ei(n,t,e){void 0===t&&(t=wn),void 0===e&&(e=ni);var r=Vt(n,t);return ti((function(){return r}),e)}function ri(n){return void 0===n&&(n=gn),function(t){return Dt((function(){return t.pipe(Dr((function(t,e){var r=t.current;return{value:e,current:n.now(),last:r}}),{current:n.now(),value:void 0,last:void 0}),bt((function(n){var t=n.current,e=n.last,r=n.value;return new ii(r,t-e)})))}))}}var ii=function(n,t){this.value=n,this.interval=t};function oi(n,t,e){var r,i,o;if(e=null!=e?e:gn,dt(n)?r=n:"number"==typeof n&&(i=n),!t)throw new TypeError("No observable provided to switch to");if(o=function(){return t},null==r&&null==i)throw new TypeError("No timeout provided.");return pt({first:r,each:i,scheduler:e,with:o})}function ui(n){return void 0===n&&(n=tn),bt((function(t){return{value:t,timestamp:n.now()}}))}function ci(n){return U((function(t,e){var r=new Q;e.next(r.asObservable());var i=function(n){r.error(n),e.error(n)};return t.subscribe(new W(e,(function(n){return null==r?void 0:r.next(n)}),(function(){r.complete(),e.complete()}),i)),n.subscribe(new W(e,(function(){r.complete(),e.next(r=new Q)}),_,i)),function(){null==r||r.unsubscribe(),r=null}}))}function ai(n,t){void 0===t&&(t=0);var e=t>0?t:n;return U((function(t,r){var i=[new Q],o=0;r.next(i[0].asObservable()),t.subscribe(new W(r,(function(t){var c,a;try{for(var l=u(i),s=l.next();!s.done;s=l.next())s.value.next(t)}catch(n){c={error:n}}finally{try{s&&!s.done&&(a=l.return)&&a.call(l)}finally{if(c)throw c.error}}var f=o-n+1;if(f>=0&&f%e==0&&i.shift().complete(),++o%e==0){var d=new Q;i.push(d),r.next(d.asObservable())}}),(function(){for(;i.length>0;)i.shift().complete();r.complete()}),(function(n){for(;i.length>0;)i.shift().error(n);r.error(n)}),(function(){i=null})))}))}function li(n){for(var t,e,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];var o=null!==(t=Nn(r))&&void 0!==t?t:wn,u=null!==(e=r[0])&&void 0!==e?e:null,c=r[1]||1/0;return U((function(t,e){var r=[],i=!1,a=function(n){var t=n.window,e=n.subs;t.complete(),e.unsubscribe(),p(r,n),i&&l()},l=function(){if(r){var t=new v;e.add(t);var i=new Q,u={window:i,subs:t,seen:0};r.push(u),e.next(i.asObservable()),Vn(t,o,(function(){return a(u)}),n)}};null!==u&&u>=0?Vn(e,o,l,u,!0):i=!0,l();var s=function(n){return r.slice().forEach(n)},f=function(n){s((function(t){var e=t.window;return n(e)})),n(e),e.unsubscribe()};return t.subscribe(new W(e,(function(n){s((function(t){t.window.next(n),c<=++t.seen&&a(t)}))}),(function(){return f((function(n){return n.complete()}))}),(function(n){return f((function(t){return t.error(n)}))}))),function(){r=null}}))}function si(n,t){return U((function(e,r){var i=[],o=function(n){for(;0<i.length;)i.shift().error(n);r.error(n)};Zn(n).subscribe(new W(r,(function(n){var e=new Q;i.push(e);var u,c=new v;try{u=Zn(t(n))}catch(n){return void o(n)}r.next(e.asObservable()),c.add(u.subscribe(new W(r,(function(){p(i,e),e.complete(),c.unsubscribe()}),_,o)))}),_)),e.subscribe(new W(r,(function(n){var t,e,r=i.slice();try{for(var o=u(r),c=o.next();!c.done;c=o.next())c.value.next(n)}catch(n){t={error:n}}finally{try{c&&!c.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}}),(function(){for(;0<i.length;)i.shift().complete();r.complete()}),o,(function(){for(;0<i.length;)i.shift().unsubscribe()})))}))}function fi(n){return U((function(t,e){var r,i,o=function(n){r.error(n),e.error(n)},u=function(){var t;null==i||i.unsubscribe(),null==r||r.complete(),r=new Q,e.next(r.asObservable());try{t=Zn(n())}catch(n){return void o(n)}t.subscribe(i=new W(e,u,u,o))};u(),t.subscribe(new W(e,(function(n){return r.next(n)}),(function(){r.complete(),e.complete()}),o,(function(){null==i||i.unsubscribe(),r=null})))}))}function di(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];var e=Hn(n);return U((function(t,r){for(var i=n.length,o=new Array(i),u=n.map((function(){return!1})),l=!1,s=function(t){Zn(n[t]).subscribe(new W(r,(function(n){o[t]=n,l||u[t]||(u[t]=!0,(l=u.every(j))&&(u=null))}),_))},f=0;f<i;f++)s(f);t.subscribe(new W(r,(function(n){if(l){var t=a([n],c(o));r.next(e?e.apply(void 0,a([],c(t))):t)}})))}))}function hi(n){return Ee(fe,n)}function pi(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return U((function(t,e){fe.apply(void 0,a([t],c(n))).subscribe(e)}))}function vi(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return pi.apply(void 0,a([],c(n)))}},199:(n,t,e)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getUserInputStream=void 0;var r=e(652),i=e(814);function o(n){var t=document.querySelector(n);return(0,r.fromEvent)(t,"click").pipe((0,r.map)((function(n){var t=n.target.getBoundingClientRect(),e=t.width,r=t.height,i=t.top,o=t.left;return{x:(n.clientX-o)/e,y:(n.clientY-i)/r}})))}function u(n,t){return!(t.x>n.x||t.x+t.width<n.x||t.y>n.y||t.y+t.height<n.y)}function c(n,t,e){if(0==n.length||!u(t,e))return-1;if(1==n.length&&(r=t.x-e.x)<=i.CARD_SIZE.width)return 0;if(e.width/i.CARD_SIZE.width>=n.length){var r=t.x-e.x,o=(e.width-i.CARD_SIZE.width*n.length)/(n.length-1);return o>i.CARD_SIZE.width*i.MAX_GAP_BEETWEN_CARDS&&(o=i.CARD_SIZE.width*i.MAX_GAP_BEETWEN_CARDS),r-(c=Math.floor(r/(i.CARD_SIZE.width+o)))*(i.CARD_SIZE.width+o)>i.CARD_SIZE.width||c>=n.length?-1:c}r=t.x-e.x;var c,a=(e.width-i.CARD_SIZE.width)/(n.length-1);return(c=Math.floor(r/a))>=n.length-1?n.length-1:c}t.getUserInputStream=function(n,t){return(0,r.combineLatest)([(0,r.of)(n),o(t)]).pipe((0,r.map)((function(n){var t=n[0],e=n[1],r=c(t.playerHand,e,i.PLAYER_HAND);if(-1!=r)return{type:"card",index:r};if(-1!=c(t.battleground.map((function(n){return n.top_card})),e,i.BATTLEGROUND))return{type:"take",index:0};var o=function(n){return u(n,i.REPLAY_BTN)?"replay button":null}(e);return null!=o?{type:o,index:0}:{type:"missclick",index:0}})),(0,r.startWith)({type:"missclick",index:0}),(0,r.switchMap)((function(n){var t=(0,r.interval)(200).pipe((0,r.mapTo)({type:"impulse",index:0}));return(0,r.merge)((0,r.of)(n),t)})))}},164:(n,t,e)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getGame=void 0;var r=e(652),i=e(199),o=e(268),u=e(433),c=e(741),a=e(557);t.getGame=function(n){var t,e=new r.Subject,l=new a.Renderer(n);return(0,r.combineLatest)([e.pipe((0,r.startWith)(0)),(0,c.loadImages)()]).pipe((0,r.switchMap)((function(e){e[0];var o=e[1],c=(0,u.newGameState)();return t=o,(0,r.combineLatest)([(0,r.of)(c),(0,r.of)(o),(0,i.getUserInputStream)(c,n)])})),(0,r.filter)((function(n){return n[0],n[1],"replay button"!=n[2].type||(e.next(0),!1)})),(0,r.tap)((function(n){var t=n[0],e=(n[1],n[2]);(0,o.gameLogic)(t,e)})),(0,r.tap)((function(n){var t=n[0],e=n[1];n[2],l.draw(t,e)})),(0,r.map)((function(n){var t=n[0];return n[1],n[2],t.gameStage})),(0,r.distinct)(),(0,r.finalize)((function(){for(var n in t)URL.revokeObjectURL(t[n].src);console.log("Cleaned")})))}},814:(n,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TRUMP_POSITION=t.REPLAY_BTN=t.BATTLEGROUND_SHIFT=t.BATTLEGROUND=t.COMPUTER_CARDS=t.PLAYER_HAND=t.MAX_GAP_BEETWEN_CARDS=t.CARD_SIZE=t.imageSourcesFolder=void 0,t.imageSourcesFolder="./img/",t.CARD_SIZE={width:.1,height:.22},t.MAX_GAP_BEETWEN_CARDS=.1,t.PLAYER_HAND={x:.04,y:.7,width:.8,height:t.CARD_SIZE.height},t.COMPUTER_CARDS={x:.04,y:.05,width:.8,height:t.CARD_SIZE.height},t.BATTLEGROUND={x:.07,y:.34,width:.7,height:t.CARD_SIZE.height},t.BATTLEGROUND_SHIFT={x:.015,y:.045},t.REPLAY_BTN={x:.93,y:.02,width:.055,height:.08},t.TRUMP_POSITION={x:.82,y:.3}},268:(n,t,e)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.gameLogic=void 0;var r=e(433);t.gameLogic=function(n,t){n.deck.length||n.battleground.length||(n.playerHand.length||n.computerHand.length?n.computerHand.length&&!n.playerHand.length?n.gameStage="win":!n.computerHand.length&&n.playerHand.length&&(n.gameStage="loose"):n.gameStage="draw"),"game"==n.gameStage&&(n.playerTurn?function(n,t){var e=(0,r.playerCanAttackWith)(n);if("card"==t.type){var i=n.playerHand[t.index];e.includes(i)&&(0,r.attack)(n.playerHand,t.index,n.battleground)}if("take"==t.type&&n.battleground.every((function(n){return n.bottom_card})))return(0,r.clearBattleground)(n),(0,r.refillHands)(n),(0,r.sortCards)(n.playerHand,n.trump),void(n.playerTurn=!1);n.battleground.length&&function(n){var t=n.battleground,e=t.findIndex((function(n){return!n.bottom_card}));if(-1!=e){var i=t[e].top_card,o=(0,r.getSmallestThatCanBeat)(i,n.computerHand,n.trump);if(o){var u=n.computerHand.indexOf(o);t[e].bottom_card=o,n.computerHand.splice(u,1)}else(0,r.takeAllFromBattleground)(t,n.computerHand),(0,r.refillHands)(n)}}(n)}(n,t):function(n,t){(function(n){if((0,r.sortCards)(n.computerHand,n.trump),0==n.battleground.length){var t=(0,r.getCardRepetitions)(n.computerHand);if(0==n.computerHand.length)return;t.length>1&&t[1]>t[0]?(0,r.attack)(n.computerHand,t[0],n.battleground):(0,r.attack)(n.computerHand,0,n.battleground)}else{var e=(0,r.computerCanAttackWith)(n);!n.computerHand.find((function(t,i){return!!e.includes(t)&&((0,r.attack)(n.computerHand,i,n.battleground),!0)}))&&n.battleground.every((function(n){return n.bottom_card}))&&(n.battleground=[],(0,r.refillHands)(n),(0,r.sortCards)(n.playerHand,n.trump),n.playerTurn=!0)}})(n),function(n,t){if("card"==t.type){var e=n.playerHand[t.index];n.battleground.find((function(i,o){return!i.bottom_card&&((0,r.canBeat)(i.top_card,e,n.trump)?(i.bottom_card=e,n.playerHand.splice(t.index,1),!0):void 0)}))}else"take"==t.type&&((0,r.takeAllFromBattleground)(n.battleground,n.playerHand),(0,r.refillHands)(n),(0,r.sortCards)(n.playerHand,n.trump))}(n,t)}(n,t))}},433:(n,t)=>{function e(){for(var n=[],t=function(t){["hearts","clubs","diamonds","spades"].forEach((function(e){n.push({suite:e,rank:t})}))},e=2;e<=14;e++)t(e);return n}function r(n,t){n.sort((function(n,e){return n.rank==e.rank&&n.suite!=t&&e.suite!=t?0:n==i([n,e],t)?-1:1}))}function i(n,t){if(0==n.length)return null;var e=n[0];return n.forEach((function(n){e.suite==t&&n.suite==t?e.rank>n.rank&&(e=n):(e.suite==t||n.suite!=t&&e.rank>n.rank)&&(e=n)})),e}function o(n,t){for(var e=n.length,r=t.length,i=0;i<Math.min(6-r,e);i++)t.push(n.pop())}function u(n,t,e){return n.suite==e&&t.suite==e?n.rank<t.rank:t.suite==e||t.suite==n.suite&&n.rank<t.rank}function c(n,t){var e=n.battleground.reduce((function(n,t){return t.bottom_card||n++,n}),0);return!((n.playerTurn?n.computerHand.length:n.playerHand.length)-e<1)&&(0==n.battleground.length||n.battleground.some((function(n){return n.top_card.rank==t.rank||!(!n.bottom_card||n.bottom_card.rank!=t.rank)})))}Object.defineProperty(t,"__esModule",{value:!0}),t.clearBattleground=t.canAttack=t.playerCanAttackWith=t.computerCanAttackWith=t.canBeat=t.getSmallestThatCanBeat=t.takeAllFromBattleground=t.getCardRepetitions=t.refillHands=t.attack=t.getSmallest=t.sortCards=t.getDeck=t.newGameState=void 0,t.newGameState=function(){for(var n=e(),t=[],i=[],o=0;o<3;o++)n.sort((function(){return 2*Math.random()-1}));for(o=0;o<6;o++)t.push(n.pop()),i.push(n.pop());return r(t,n[0].suite),r(i,n[0].suite),{deck:n,playerHand:t,computerHand:i,playerTurn:Math.random()>.5,battleground:[],trump:n[0].suite,gameStage:"game"}},t.getDeck=e,t.sortCards=r,t.getSmallest=i,t.attack=function(n,t,e){e.push({top_card:n.splice(t,1)[0],bottom_card:null})},t.refillHands=function(n){var t=n.deck;n.playerTurn?(o(t,n.playerHand),o(t,n.computerHand)):(o(t,n.computerHand),o(t,n.playerHand))},t.getCardRepetitions=function(n){return n.reduce((function(n,t){return n.last!=t?n.arr.push(1):n.arr[n.arr.length]++,n}),{arr:[],last:null}).arr},t.takeAllFromBattleground=function(n,t){n.forEach((function(n){t.push(n.top_card),n.bottom_card&&t.push(n.bottom_card)})),n.splice(0,n.length)},t.getSmallestThatCanBeat=function(n,t,e){var r=null;return t.forEach((function(t){u(n,t,e)&&(r?u(t,r,e)&&(r=t):r=t)})),r},t.canBeat=u,t.computerCanAttackWith=function(n){return n.computerHand.filter((function(t){return c(n,t)}))},t.playerCanAttackWith=function(n){return n.playerHand.filter((function(t){return c(n,t)}))},t.canAttack=c,t.clearBattleground=function(n){n.battleground=[]}},741:(n,t,e)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.loadImages=void 0;var r=e(652),i=e(814).imageSourcesFolder,o=["bg1.jpeg","bg2.jpeg","cards.png","replay.png"];function u(n){return n.split(".")[0]}t.loadImages=function(){return r.of.apply(void 0,o).pipe((0,r.mergeMap)((function(n){return(0,r.combineLatest)([(0,r.of)(u(n)),(0,r.from)(fetch(i+n))])})),(0,r.mergeMap)((function(n){var t=n[0],e=n[1];return(0,r.combineLatest)([(0,r.of)(t),(0,r.from)(e.blob())])})),(0,r.map)((function(n){var t=n[0],e=n[1],r=document.createElement("img");return r.src=URL.createObjectURL(e),[t,r]})),(0,r.bufferCount)(o.length),(0,r.map)((function(n){return Object.fromEntries(n)})))}},557:function(n,t,e){var r=this&&this.__assign||function(){return(r=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++)for(var i in t=arguments[e])Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i]);return n}).apply(this,arguments)},i=this&&this.__spreadArray||function(n,t,e){if(e||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return n.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.Renderer=void 0;var o=e(814),u=function(){function n(n){this.canvas=document.querySelector(n),this.ctx=this.canvas.getContext("2d"),this.background=Math.random()>.5?"bg1":"bg2"}return n.prototype.draw=function(n,t){this.canvasSizes=this.canvas.getBoundingClientRect();var e=t.cards;if(this.drawBackground(t[this.background]),this.putHand(t.cards,this.getClipingAreaSequence(n.computerHand,!0),o.COMPUTER_CARDS),this.drawBattleground(e,n.battleground),this.drawDeck(e,n.deck),this.putHand(e,this.getClipingAreaSequence(n.playerHand),o.PLAYER_HAND),this.drawButtonImage(t.replay,o.REPLAY_BTN),"game"==n.gameStage){var r=n.playerTurn?" ":" ";this.drawText(r,32,{x:.47,y:.67})}else{var i=n.gameStage;this.drawText({draw:"!",win:" !",loose:" !"}[i],40,{x:.5,y:.5})}},n.prototype.drawText=function(n,t,e){var r,o=this.canvasSizes,u=o.width,c=o.height,a=[u*e.x,c*e.y];this.ctx.font=t+"px Arial",this.ctx.textAlign="center",this.ctx.fillStyle="#808080",(r=this.ctx).fillText.apply(r,i([n],a,!1))},n.prototype.drawButtonImage=function(n,t){var e={x:0,y:0,width:n.width,height:n.height};this.putImage(n,e,t)},n.prototype.drawDeck=function(n,t){var e=this.getClipingAreaSequence([t[0]]),i=r(r({},o.TRUMP_POSITION),o.CARD_SIZE);this.putHand(n,e,i);var u=this.getClipingAreaSequence([t[0]],!0);i.x=0,i.y=0;for(var c=this.canvasSizes,a=c.width,l=c.height,s=0;s<t.length-1;s++)this.ctx.save(),this.ctx.translate(a*(o.TRUMP_POSITION.x-.023),l*(o.TRUMP_POSITION.y+.25)),this.ctx.rotate(-.5*Math.PI),this.putImage(n,u[0],i),i.x-=.001,i.y+=3e-4,this.ctx.restore()},n.prototype.drawBattleground=function(n,t){var e=this.getClipingAreaSequence(t.map((function(n){return n.top_card}))),r=this.getClipingAreaSequence(t.map((function(n){return n.bottom_card}))),i=(this.putHand(n,e,o.BATTLEGROUND),{x:o.BATTLEGROUND.x+o.BATTLEGROUND_SHIFT.x,y:o.BATTLEGROUND.y+o.BATTLEGROUND_SHIFT.y,width:o.BATTLEGROUND.width,height:o.BATTLEGROUND.height});this.putHand(n,r,i)},n.prototype.drawBackground=function(n){var t={x:0,y:0,width:n.width,height:n.height};this.putImage(n,t,{x:0,y:0,width:1,height:1})},n.prototype.putImage=function(n,t,e){var r=this.canvasSizes,i=r.width,o=r.height;this.ctx.drawImage(n,t.x,t.y,t.width,t.height,e.x*i,e.y*o,e.width*i,e.height*o)},n.prototype.getClipingAreaSequence=function(n,t){void 0===t&&(t=!1);var e=960/13,r={hearts:2,clubs:0,diamonds:1,spades:3},i=[];if(t){var o={x:2*e,y:460,width:e,height:115};n.forEach((function(){return i.push(o)}))}else n.forEach((function(n){if(n){var t=0,o=115*r[n.suite];n.rank<=13&&(t=e*(n.rank-1)),i.push({x:t,y:o,width:e,height:115})}else i.push({x:0,y:0,width:0,height:0})}));return i},n.prototype.putHand=function(n,t,e,r){var i=this;void 0===r&&(r=-1);var u=t.length,c=e.width-o.CARD_SIZE.width,a=u>1?c/(u-1):0;a>o.CARD_SIZE.width*(1+o.MAX_GAP_BEETWEN_CARDS)&&(a=o.CARD_SIZE.width*(1+o.MAX_GAP_BEETWEN_CARDS)),-1!=r&&(a=r);var l=o.CARD_SIZE.width,s=o.CARD_SIZE.height;return t.forEach((function(t,r){if(0!=t.height&&0!=t.height){var o={x:e.x+a*r,y:e.y,width:l,height:s};i.putImage(n,t,o)}})),a},n}();t.Renderer=u}},t={};function e(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return n[r].call(o.exports,o,o.exports,e),o.exports}e.d=(n,t)=>{for(var r in t)e.o(t,r)&&!e.o(n,r)&&Object.defineProperty(n,r,{enumerable:!0,get:t[r]})},e.o=(n,t)=>Object.prototype.hasOwnProperty.call(n,t),e.r=n=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},(0,e(164).getGame)("#gameCanvas").subscribe(console.log)})();